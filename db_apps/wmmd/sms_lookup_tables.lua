-------------------------------------------------------------------------------------------------------------
-- Copyright (C) 2018 NetComm Wireless limited.
--
-------------------------------------------------------------------------------------------------------------

-- SMS Lookup Tables

local gsm7toascii = {
--GSM7    ASCII
  [0]  = 64,     --  @  COMMERCIAL AT
  [1]  = 163,    --  £  POUND SIGN
  [2]  = 36,     --  $  DOLLAR SIGN
  [3]  = 165,    --  ¥  YEN SIGN
  [4]  = 232,    --  è  LATIN SMALL LETTER E WITH GRAVE
  [5]  = 233,    --  é  LATIN SMALL LETTER E WITH ACUTE
  [6]  = 249,    --  ù  LATIN SMALL LETTER U WITH GRAVE
  [7]  = 236,    --  ì  LATIN SMALL LETTER I WITH GRAVE
  [8]  = 242,    --  ò  LATIN SMALL LETTER O WITH GRAVE
  [9]  = 199,    --  Ç  LATIN CAPITAL LETTER C WITH CEDILLA
  [10] = 10,     --     LINE FEED
  [11] = 216,    --  Ø  LATIN CAPITAL LETTER O WITH STROKE
  [12] = 248,    --  ø  LATIN SMALL LETTER O WITH STROKE
  [13] = 13,     --     CARRIAGE RETURN
  [14] = 197,    --  Å  LATIN CAPITAL LETTER A WITH RING ABOVE
  [15] = 229,    --  å  LATIN SMALL LETTER A WITH RING ABOVE
  [17] = 95,     --  _  LOW LINE
  -- Non printable characters in GSM, set to inverted question mark
  [16] = 191,    --     GREEK CAPITAL LETTER DELTA
  [18] = 191,    --     GREEK CAPITAL LETTER PHI
  [19] = 191,    --     GREEK CAPITAL LETTER GAMMA
  [20] = 191,    --     GREEK CAPITAL LETTER LAMBDA
  [21] = 191,    --     GREEK CAPITAL LETTER OMEGA
  [22] = 191,    --     GREEK CAPITAL LETTER PI
  [23] = 191,    --     GREEK CAPITAL LETTER PSI
  [24] = 191,    --     GREEK CAPITAL LETTER SIGMA
  [25] = 191,    --     GREEK CAPITAL LETTER THETA
  [26] = 191,    --     GREEK CAPITAL LETTER XI
  -- END Non printable characters in GSM
  [27] = 27,     --     ESCAPE TO EXTENSION TABLE
  [28] = 198,    --  Æ  LATIN CAPITAL LETTER AE
  [29] = 230,    --  æ  LATIN SMALL LETTER AE
  [30] = 223,    --  ß  LATIN SMALL LETTER SHARP S (German)
  [31] = 201,    --  É  LATIN CAPITAL LETTER E WITH ACUTE
  [32] = 32,     --     SPACE
  [33] = 33,     --  !  EXCLAMATION MARK
  [34] = 34,     --  "  QUOTATION MARK
  [35] = 35,     --  #  NUMBER SIGN
  [36] = 166,    --  €  CURRENCY SIGN
  [37] = 37,     --  %  PERCENT SIGN
  [38] = 38,     --  &  AMPERSAND
  [39] = 39,     --  '  APOSTROPHE
  [40] = 40,     --  (  LEFT PARENTHESIS
  [41] = 41,     --  )  RIGHT PARENTHESIS
  [42] = 42,     --  *  ASTERISK
  [43] = 43,     --  +  PLUS SIGN
  [44] = 44,     --  ,  COMMA
  [45] = 45,     --  -  HYPHEN-MINUS
  [46] = 46,     --  .  FULL STOP
  [47] = 47,     --  /  SOLIDUS (SLASH)
  [48] = 48,     --  0  DIGIT ZERO
  [49] = 49,     --  1  DIGIT ONE
  [50] = 50,     --  2  DIGIT TWO
  [51] = 51,     --  3  DIGIT THREE
  [52] = 52,     --  4  DIGIT FOUR
  [53] = 53,     --  5  DIGIT FIVE
  [54] = 54,     --  6  DIGIT SIX
  [55] = 55,     --  7  DIGIT SEVEN
  [56] = 56,     --  8  DIGIT EIGHT
  [57] = 57,     --  9  DIGIT NINE
  [58] = 58,     --  :  COLON
  [59] = 59,     --  ;  SEMICOLON
  [60] = 60,     --  <  LESS-THAN SIGN
  [61] = 61,     --  =  EQUALS SIGN
  [62] = 62,     --  >  GREATER-THAN SIGN
  [63] = 63,     --  ?  QUESTION MARK
  [64] = 161,    --  ¡  INVERTED EXCLAMATION MARK
  [65] = 65,     --  A  LATIN CAPITAL LETTER A
  [66] = 66,     --  B  LATIN CAPITAL LETTER B
  [67] = 67,     --  C  LATIN CAPITAL LETTER C
  [68] = 68,     --  D  LATIN CAPITAL LETTER D
  [69] = 69,     --  E  LATIN CAPITAL LETTER E
  [70] = 70,     --  F  LATIN CAPITAL LETTER F
  [71] = 71,     --  G  LATIN CAPITAL LETTER G
  [72] = 72,     --  H  LATIN CAPITAL LETTER H
  [73] = 73,     --  I  LATIN CAPITAL LETTER I
  [74] = 74,     --  J  LATIN CAPITAL LETTER J
  [75] = 75,     --  K  LATIN CAPITAL LETTER K
  [76] = 76,     --  L  LATIN CAPITAL LETTER L
  [77] = 77,     --  M  LATIN CAPITAL LETTER M
  [78] = 78,     --  N  LATIN CAPITAL LETTER N
  [79] = 79,     --  O  LATIN CAPITAL LETTER O
  [80] = 80,     --  P  LATIN CAPITAL LETTER P
  [81] = 81,     --  Q  LATIN CAPITAL LETTER Q
  [82] = 82,     --  R  LATIN CAPITAL LETTER R
  [83] = 83,     --  S  LATIN CAPITAL LETTER S
  [84] = 84,     --  T  LATIN CAPITAL LETTER T
  [85] = 85,     --  U  LATIN CAPITAL LETTER U
  [86] = 86,     --  V  LATIN CAPITAL LETTER V
  [87] = 87,     --  W  LATIN CAPITAL LETTER W
  [88] = 88,     --  X  LATIN CAPITAL LETTER X
  [89] = 89,     --  Y  LATIN CAPITAL LETTER Y
  [90] = 90,     --  Z  LATIN CAPITAL LETTER Z
  [91] = 196,    --  Ä  LATIN CAPITAL LETTER A WITH DIAERESIS
  [92] = 214,    --  Ö  LATIN CAPITAL LETTER O WITH DIAERESIS
  [93] = 209,    --  Ñ  LATIN CAPITAL LETTER N WITH TILDE
  [94] = 220,    --  Ü  LATIN CAPITAL LETTER U WITH DIAERESIS
  [95] = 167,    --  §  SECTION SIGN
  [96] = 191,    --  ¿  INVERTED QUESTION MARK
  [97] = 97,     --  a  LATIN SMALL LETTER A
  [98] = 98,     --  b  LATIN SMALL LETTER B
  [99] = 99,     --  c  LATIN SMALL LETTER C
  [100] = 100,    --  d  LATIN SMALL LETTER D
  [101] = 101,    --  e  LATIN SMALL LETTER E
  [102] = 102,    --  f  LATIN SMALL LETTER F
  [103] = 103,    --  g  LATIN SMALL LETTER G
  [104] = 104,    --  h  LATIN SMALL LETTER H
  [105] = 105,    --  i  LATIN SMALL LETTER I
  [106] = 106,    --  j  LATIN SMALL LETTER J
  [107] = 107,    --  k  LATIN SMALL LETTER K
  [108] = 108,    --  l  LATIN SMALL LETTER L
  [109] = 109,    --  m  LATIN SMALL LETTER M
  [110] = 110,    --  n  LATIN SMALL LETTER N
  [111] = 111,    --  o  LATIN SMALL LETTER O
  [112] = 112,    --  p  LATIN SMALL LETTER P
  [113] = 113,    --  q  LATIN SMALL LETTER Q
  [114] = 114,    --  r  LATIN SMALL LETTER R
  [115] = 115,    --  s  LATIN SMALL LETTER S
  [116] = 116,    --  t  LATIN SMALL LETTER T
  [117] = 117,    --  u  LATIN SMALL LETTER U
  [118] = 118,    --  v  LATIN SMALL LETTER V
  [119] = 119,    --  w  LATIN SMALL LETTER W
  [120] = 120,    --  x  LATIN SMALL LETTER X
  [121] = 121,    --  y  LATIN SMALL LETTER Y
  [122] = 122,    --  z  LATIN SMALL LETTER Z
  [123] = 228,    --  ä  LATIN SMALL LETTER A WITH DIAERESIS
  [124] = 246,    --  ö  LATIN SMALL LETTER O WITH DIAERESIS
  [125] = 241,    --  ñ  LATIN SMALL LETTER N WITH TILDE
  [126] = 252,    --  ü  LATIN SMALL LETTER U WITH DIAERESIS
  [127] = 224     --  à  LATIN SMALL LETTER A WITH GRAVE
}

local gsm7toascii_ext = {
  -- The double bytes below must be handled separately after the table lookup.
  [10] = 12,   -- 27 10      FORM FEED
  [20] = 94,   -- 27 20   ^  CIRCUMFLEX ACCENT
  [40] = 123,  -- 27 40   {  LEFT CURLY BRACKET
  [41] = 125,  -- 27 41   }  RIGHT CURLY BRACKET
  [47] = 92,   -- 27 47   \  REVERSE SOLIDUS (BACKSLASH)
  [60] = 91,   -- 27 60   [  LEFT SQUARE BRACKET
  [61] = 126,  -- 27 61   ~  TILDE
  [62] = 93,   -- 27 62   ]  RIGHT SQUARE BRACKET
  [64] = 124   -- 27 64   |  VERTICAL BAR
}

local gsm7tounicode = {
-- gsm7    unicode
  [0x00] = 0x0040,    -- @ : COMMERCIAL AT
  [0x01] = 0x00A3,    -- £ : POUND SIGN
  [0x02] = 0x0024,    -- $ : DOLLAR SIGN
  [0x03] = 0x00A5,    -- ¥ : YEN SIGN
  [0x04] = 0x00E8,    -- è : LATIN SMALL LETTER E WITH GRAVE
  [0x05] = 0x00E9,    -- é : LATIN SMALL LETTER E WITH ACUTE
  [0x06] = 0x00F9,    -- ù : LATIN SMALL LETTER U WITH GRAVE
  [0x07] = 0x00EC,    -- ì : LATIN SMALL LETTER I WITH GRAVE
  [0x08] = 0x00F2,    -- ò : LATIN SMALL LETTER O WITH GRAVE
  [0x09] = 0x00C7,    -- Ç : LATIN CAPITAL LETTER C WITH CEDILLA
  [0x0A] = 0x000A,    -- LF
  [0x0B] = 0x00D8,    -- Ø : LATIN CAPITAL LETTER O WITH STROKE
  [0x0C] = 0x00F8,    -- ø : LATIN SMALL LETTER O WITH STROKE
  [0x0D] = 0x000D,    -- CR
  [0x0E] = 0x00C5,    -- Å : LATIN CAPITAL LETTER A WITH RING ABOVE
  [0x0F] = 0x00E5,    -- å : LATIN SMALL LETTER A WITH RING ABOVE
  [0x10] = 0x0394,    -- Δ : GREEK CAPITAL LETTER DELTA
  [0x11] = 0x005F,    -- _ : LOW LINE
  [0x12] = 0x03A6,    -- Φ : GREEK CAPITAL LETTER PHI
  [0x13] = 0x0393,    -- Γ : GREEK CAPITAL LETTER GAMMA
  [0x14] = 0x039B,    -- Λ : GREEK CAPITAL LETTER LAMBDA
  [0x15] = 0x03A9,    -- Ω : GREEK CAPITAL LETTER OMEGA
  [0x16] = 0x03A0,    -- Π : GREEK CAPITAL LETTER PI
  [0x17] = 0x03A8,    -- Ψ : GREEK CAPITAL LETTER PSI
  [0x18] = 0x03A3,    -- Σ : GREEK CAPITAL LETTER SIGMA
  [0x19] = 0x0398,    -- Θ : GREEK CAPITAL LETTER THETA
  [0x1A] = 0x039E,    -- Ξ : GREEK CAPITAL LETTER XI
  [0x1B] = 0x001B,    -- ESCAPE TO EXTENSION TABLE
  [0x1C] = 0x00C6,    -- Æ : LATIN CAPITAL LETTER AE
  [0x1D] = 0x00E6,    -- æ : LATIN SMALL LETTER AE
  [0x1E] = 0x00DF,    -- ß : LATIN SMALL LETTER SHARP S
  [0x1F] = 0x00C9,    -- É : LATIN CAPITAL LETTER E WITH ACUTE
  [0x20] = 0x0020,    -- SPACE
  [0x21] = 0x0021,    -- ! : EXCLAMATION MARK
  [0x22] = 0x0022,    -- " : QUOTATION MARK
  [0x23] = 0x0023,    -- # : NUMBER SIGN
  [0x24] = 0x00A4,    -- ¤ : CURRENCY SIGN
  [0x25] = 0x0025,    -- % : PERCENT SIGN
  [0x26] = 0x0026,    -- & : AMPERSAND
  [0x27] = 0x0027,    -- ' : APOSTROPHE
  [0x28] = 0x0028,    -- ( : LEFT PARENTHESIS
  [0x29] = 0x0029,    -- ) : RIGHT PARENTHESIS
  [0x2A] = 0x002A,    -- * : ASTERISK
  [0x2B] = 0x002B,    -- + : PLUS SIGN
  [0x2C] = 0x002C,    -- , : COMMA
  [0x2D] = 0x002D,    -- - : HYPHEN-MINUS
  [0x2E] = 0x002E,    -- . : FULL STOP
  [0x2F] = 0x002F,    -- / : SOLIDUS
  [0x30] = 0x0030,    -- 0 : DIGIT ZERO
  [0x31] = 0x0031,    -- 1 : DIGIT ONE
  [0x32] = 0x0032,    -- 2 : DIGIT TWO
  [0x33] = 0x0033,    -- 3 : DIGIT THREE
  [0x34] = 0x0034,    -- 4 : DIGIT FOUR
  [0x35] = 0x0035,    -- 5 : DIGIT FIVE
  [0x36] = 0x0036,    -- 6 : DIGIT SIX
  [0x37] = 0x0037,    -- 7 : DIGIT SEVEN
  [0x38] = 0x0038,    -- 8 : DIGIT EIGHT
  [0x39] = 0x0039,    -- 9 : DIGIT NINE
  [0x3A] = 0x003A,    -- : : COLON
  [0x3B] = 0x003B,    -- ; : SEMICOLON
  [0x3C] = 0x003C,    -- < : LESS-THAN SIGN
  [0x3D] = 0x003D,    -- = : EQUALS SIGN
  [0x3E] = 0x003E,    -- > : GREATER-THAN SIGN
  [0x3F] = 0x003F,    -- ? : QUESTION MARK
  [0x40] = 0x00A1,    -- ¡ : INVERTED EXCLAMATION MARK
  [0x41] = 0x0041,    -- A : LATIN CAPITAL LETTER A
  [0x42] = 0x0042,    -- B : LATIN CAPITAL LETTER B
  [0x43] = 0x0043,    -- C : LATIN CAPITAL LETTER C
  [0x44] = 0x0044,    -- D : LATIN CAPITAL LETTER D
  [0x45] = 0x0045,    -- E : LATIN CAPITAL LETTER E
  [0x46] = 0x0046,    -- F : LATIN CAPITAL LETTER F
  [0x47] = 0x0047,    -- G : LATIN CAPITAL LETTER G
  [0x48] = 0x0048,    -- H : LATIN CAPITAL LETTER H
  [0x49] = 0x0049,    -- I : LATIN CAPITAL LETTER I
  [0x4A] = 0x004A,    -- J : LATIN CAPITAL LETTER J
  [0x4B] = 0x004B,    -- K : LATIN CAPITAL LETTER K
  [0x4C] = 0x004C,    -- L : LATIN CAPITAL LETTER L
  [0x4D] = 0x004D,    -- M : LATIN CAPITAL LETTER M
  [0x4E] = 0x004E,    -- N : LATIN CAPITAL LETTER N
  [0x4F] = 0x004F,    -- O : LATIN CAPITAL LETTER O
  [0x50] = 0x0050,    -- P : LATIN CAPITAL LETTER P
  [0x51] = 0x0051,    -- Q : LATIN CAPITAL LETTER Q
  [0x52] = 0x0052,    -- R : LATIN CAPITAL LETTER R
  [0x53] = 0x0053,    -- S : LATIN CAPITAL LETTER S
  [0x54] = 0x0054,    -- T : LATIN CAPITAL LETTER T
  [0x55] = 0x0055,    -- U : LATIN CAPITAL LETTER U
  [0x56] = 0x0056,    -- V : LATIN CAPITAL LETTER V
  [0x57] = 0x0057,    -- W : LATIN CAPITAL LETTER W
  [0x58] = 0x0058,    -- X : LATIN CAPITAL LETTER X
  [0x59] = 0x0059,    -- Y : LATIN CAPITAL LETTER Y
  [0x5A] = 0x005A,    -- Z : LATIN CAPITAL LETTER Z
  [0x5B] = 0x00C4,    -- Ä : LATIN CAPITAL LETTER A WITH DIAERESIS
  [0x5C] = 0x00D6,    -- Ö : LATIN CAPITAL LETTER O WITH DIAERESIS
  [0x5D] = 0x00D1,    -- Ñ : LATIN CAPITAL LETTER N WITH TILDE
  [0x5E] = 0x00DC,    -- Ü : LATIN CAPITAL LETTER U WITH DIAERESIS
  [0x5F] = 0x00A7,    -- § : SECTION SIGN
  [0x60] = 0x00BF,    -- ¿ : INVERTED QUESTION MARK
  [0x61] = 0x0061,    -- a : LATIN SMALL LETTER a
  [0x62] = 0x0062,    -- b : LATIN SMALL LETTER b
  [0x63] = 0x0063,    -- c : LATIN SMALL LETTER c
  [0x64] = 0x0064,    -- d : LATIN SMALL LETTER d
  [0x65] = 0x0065,    -- e : LATIN SMALL LETTER e
  [0x66] = 0x0066,    -- f : LATIN SMALL LETTER f
  [0x67] = 0x0067,    -- g : LATIN SMALL LETTER g
  [0x68] = 0x0068,    -- h : LATIN SMALL LETTER h
  [0x69] = 0x0069,    -- i : LATIN SMALL LETTER i
  [0x6A] = 0x006A,    -- j : LATIN SMALL LETTER j
  [0x6B] = 0x006B,    -- k : LATIN SMALL LETTER k
  [0x6C] = 0x006C,    -- l : LATIN SMALL LETTER l
  [0x6D] = 0x006D,    -- m : LATIN SMALL LETTER m
  [0x6E] = 0x006E,    -- n : LATIN SMALL LETTER n
  [0x6F] = 0x006F,    -- o : LATIN SMALL LETTER o
  [0x70] = 0x0070,    -- p : LATIN SMALL LETTER p
  [0x71] = 0x0071,    -- q : LATIN SMALL LETTER q
  [0x72] = 0x0072,    -- r : LATIN SMALL LETTER r
  [0x73] = 0x0073,    -- s : LATIN SMALL LETTER s
  [0x74] = 0x0074,    -- t : LATIN SMALL LETTER t
  [0x75] = 0x0075,    -- u : LATIN SMALL LETTER u
  [0x76] = 0x0076,    -- v : LATIN SMALL LETTER v
  [0x77] = 0x0077,    -- w : LATIN SMALL LETTER w
  [0x78] = 0x0078,    -- x : LATIN SMALL LETTER x
  [0x79] = 0x0079,    -- y : LATIN SMALL LETTER y
  [0x7A] = 0x007A,    -- z : LATIN SMALL LETTER z
  [0x7B] = 0x00E4,    -- ä : LATIN SMALL LETTER a WITH DIAERESIS
  [0x7C] = 0x00F6,    -- ö : LATIN SMALL LETTER o WITH DIAERESIS
  [0x7D] = 0x00F1,    -- ñ : LATIN SMALL LETTER n WITH TILDE
  [0x7E] = 0x00FC,    -- ü : LATIN SMALL LETTER u WITH DIAERESIS
  [0x7F] = 0x00E0,    -- à : LATIN SMALL LETTER a WITH GRAVE
}
-- Extended characters. In GSM they are preceeded by 0x1B.
local gsm7tounicode_ext = {
-- gsm7    unicode
  [0x0A] = 0x000C,    -- FORM FEED
  [0x14] = 0x005E,    -- ^ : CIRCUMFLEX ACCENT
  [0x28] = 0x007B,    -- { : LEFT CURLY BRACKET
  [0x29] = 0x007D,    -- } : RIGHT CURLY BRACKET
  [0x2F] = 0x005C,    -- \ : REVERSE SOLIDUS (BACKSLASH)
  [0x3C] = 0x005B,    -- [ : LEFT SQUARE BRACKET
  [0x3D] = 0x007E,    -- ~ : TILDE
  [0x3E] = 0x005D,    -- ] : RIGHT SQUARE BRACKET
  [0x40] = 0x007C,    -- | : VERTICAL LINE
  [0x65] = 0x20AC,    -- € : EURO SIGN
}

return {
  gsm7toascii=gsm7toascii,
  gsm7toascii_ext=gsm7toascii_ext,
  gsm7tounicode=gsm7tounicode,
  gsm7tounicode_ext=gsm7tounicode_ext,
}

