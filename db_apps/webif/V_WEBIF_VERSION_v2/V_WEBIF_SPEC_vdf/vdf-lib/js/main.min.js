(function(){this.VF={}}).call(this);
(function(){VF.config={strings:{added:"Added",address:"Enter address manually",addressSelect:"Select an address",addProduct:"Add to compare",addToOrder:"Add to order",charcount:"You have {int} characters remaining.",clear:"Clear",content:"content",compareEmpty:" To add a phone, please select one below.",compareFree:" - {number} out of {total} compare slots free.",compareFull:" To add a phone, please remove one phone.",compareNow:"Compare now",disabled:"Disabled",error:"Error - ",hide:"Hide",landline:"No landline number?",
less:"Less",more:"More",noResults:"No search results",print:"Print this page",removeOrder:"Remove",removeExtra:"Remove this extra",removeProduct:"Remove from compare",rating:"Rating - {rating} stars out of 5",select:"Select a",selected:"Selected",show:"Show",slide:"Show item {int} of {total} - ",tabTip:"Use your left and right arrow keys to go to tabs. Use the enter key to get the content for a tab."},patterns:{email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,
landline:/^([\+(][+0-9()]{1,5}([ )\-])?)?([\(]{1}[0-9]{3}[\)])?([0-9 \-]{1,256}([ \s\-])?)((x|ext|extension)?[0-9]{1,4}?)$/i,mobile:/^((0|\+44|00\d{2})7(5|6|7|8|9){1}\d{2}\s?\d{6})$/,numbers:/^\d+$/,postcode:/^([Gg][Ii][Rr] 0[Aa]{2})|((([A-Za-z][0-9]{1,2})|(([A-Za-z][A-Ha-hJ-Yj-y][0-9]{1,2})|(([A-Za-z][0-9][A-Za-z])|([A-Za-z][A-Ha-hJ-Yj-y][0-9]?[A-Za-z])))) {0,1}[0-9][A-Za-z]{2})$/},errors:{error:"Error - ",email:"Please enter a valid email address, e.g. email@example.co.uk.",landline:"Please enter a valid landline number, e.g. 020 1234 1234.",
mobile:"Please enter a valid mobile number, e.g. 07555 000000.",numbers:"Please ensure only numbers are entered.",postcode:"Please enter a valid UK postcode, e.g. AA1 2BB.",match:"Please ensure this field matches the one above.",required:"This field is required.",requiredGroup:"These fields are required.",summary:"Please configure the error summary text in VF.config.errors.summary",charcount:"Your message is too long.",title:"Sorry there has been {number} error(s)"},json:{address:"../ajax-response-json/find-address.php",
preview:"../ajax-response-json/products-preview.php",popular:"../ajax-response-json/find-device.php"},mapper:{numbers:["zero","one","two","three","four","five"]},html:{close:'<a href="#dialog" class="fr di-close">Close<span class="close"></span></a>',loader:'<div class="loader" title="Please wait while the content loads..."><span class="access">Please wait while the content loads...</span></div>',"loader-lrg":'<div class="loader-lrg" title="Please wait while the content loads..."><span class="access">Please wait while the content loads...</span></div>'},
integers:{reveal:200}};VF.config.html.dialog='<div id="dialog">'+VF.config.html["loader-lrg"]+"</div>"})(VF);
(function(){VF.util={upperCaseFirst:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},capitalise:function(f){var e=f.split(" "),a,d,b,c;for(a=0;a<e.length;a+=1){c=e[a];d=c.substr(0,1);b=c.substr(1,c.length-1);e[a]=d.toUpperCase()+b}return e.join(" ")},initModules:function(j,c){var d,e={},a=document.createElement("div"),b,h,f;a.innerHTML=j;b=a.getElementsByTagName("*");$.each(b,function(k){if(b[k].id===c){h=b[k].innerHTML.match(/modules.push\(([^)]*)\)/g);return}});if(h)for(var g=0;g<h.length;g+=
1){h[g]=h[g].replace(/modules.push\(|[(,'"\)]/g,"");if(h[g].match(" ")){f=h[g].split(" ");h.push.apply(h,f);h.splice(g,1);g-=1}else e[h[g]]=h[g]}for(d in e)if(VF[d])VF[d].init($("#"+c))}}})(VF);(function(){jQuery.expr[":"].Contains=function(c,d,b){return(c.textContent||c.innerText||"").toUpperCase().indexOf(b[3].toUpperCase())>=0}}).call(this);
(function(){VF.dialog={init:function(){$(".dialog").bind("mouseenter mouseleave",function(a){if(a.type==="mouseenter")$(this).bind("click",VF.dialog.click);else $(this).unbind("click",VF.dialog.click)})},click:function(b){b.preventDefault();var a=$(b.currentTarget);VF.dialog.open.call(a)},open:function(d){$("body").append(VF.config.html.dialog);var c=$("#dialog"),e=d,a,b,h,g,f;c.dialog({modal:true,draggable:false,open:$.proxy(function(){f=$(VF.config.html.close);c.prev(".ui-dialog-titlebar").remove();
f.bind("click",function(i){i.preventDefault();c.dialog("close")});c.append(f);if(!e){a=this.is("a")?this.attr("href"):this.attr("data-href");b=a.split("#")[0];h="#"+a.split("#")[1];g=this.attr("data-modules")?this.attr("data-modules").split(" "):false;$.get(b,function(i){c.find(".loader-lrg").replaceWith($(i).find(h));if(g)$.each(g,function(j,k){VF[k].init($("#dialog"))});c.trigger("/dialog/content")})}else{c.find(".loader-lrg").replaceWith(e);c.trigger("/dialog/content")}},this),minHeight:200,close:$.proxy(function(){this.remove()},
c),width:"800",position:["center",100]})}}})(VF);jQuery(function(a){VF.modules={};a.each(modules,function(){if(!VF.modules[this]){VF.modules[this]=this;if(VF[VF.modules[this]])VF[VF.modules[this]].init()}})});
(function(){VF["drop-list"]={init:function(){$(".drop-list").each(function(b){var d=$(this),f="drop-list-"+b,a=d.children(".dl-head "),e='<span class="access">'+VF.config.strings.show+" </span>",c='<span class="access"> '+VF.config.strings.content+'</span><span class="arrow-down"></span>';d.find(".dl-body").attr("id",f);a.html(e+a.html()+c);a.bind("click",$.proxy(VF["drop-list"].toggleList,d))})},toggleList:function(c){var f=$(this).find("a"),b=$(this).find(".dl-head "),a=$(this).find(".dl-body"),
d=$(this).find(".dl-close");if($(this).hasClass("drop-active")){this.unbind("keydown");f.unbind("focusout");d.unbind("click");b.html(b.html().replace(VF.config.strings.hide,VF.config.strings.show))}else{this.bind("keydown",function(g){if(g.keyCode===27)b.trigger("click").focus()});f.bind("focusout",function(g){window.setTimeout(function(){if(!f.is(":focus"))b.trigger("click")},15)});b.html(b.html().replace(VF.config.strings.show,VF.config.strings.hide));d.bind("click",function(g){b.trigger("click")})}a.slideToggle("fast");
this.toggleClass("drop-active");return false}}})(VF);
(function(){VF.expandables={init:function(b){var a=b&&b instanceof jQuery?b.find(".expandables"):$(".expandables");a.each(function(f){var e=$(this).children(".head"),j=e.text().replace(":",""),k="expandable-"+f,c=$(this).children(".body"),h='<span class="access">{text}</span>',g="",d=$(this).hasClass("ex-open");g=$(this).closest("form").length>0?'<button type="button" class="link-button"></button>':'<a href="#'+k+'"></a>';g=$(g);g.addClass("ex-toggle").prepend('<span class="access"> '+j+" "+VF.config.strings.content+
"</span>");h=$(this).hasClass("ex-open")?h.replace("{text}",VF.config.strings.hide):h.replace("{text}",VF.config.strings.show);g.prepend(h);g.bind("click",$.proxy(VF.expandables.click,$(this)));g.bind("focusin focusout",VF.expandables.focus);g.bind("keydown",$.proxy(VF.expandables.arrowKeys,$(this)));e.after(g);$(this).delegate(".ex-trigger","mousedown",$.proxy(VF.expandables.click,$(this)));c.attr("id",k);if(!d){$(this).addClass("ex-close");setTimeout(function(){c.hide()},100)}})},click:function(b){var c=
this,a=this.parent(".ex-accordion");if(a.length>0)c=this.add(a.children(".ex-open"));c.toggleClass("ex-open").toggleClass("ex-close").children(".body").slideToggle("fast");c.each(function(e){var d=$(this).hasClass("ex-open")?VF.config.strings.hide:VF.config.strings.show;$(this).children(".ex-toggle").children("span:first-child").text(d)});return false},focus:function(){$(this).prev().toggleClass("ex-focus")},arrowKeys:function(c){var a=this.parent(".ex-accordion"),b=this.children(".ex-toggle").is("a");
if(a.length>0){if(c.keyCode===32&&b){c.preventDefault();this.children(".ex-toggle").trigger("click")}if(c.keyCode===39||c.keyCode===40){c.preventDefault();this.next().find(".ex-toggle:first").focus()}if(c.keyCode===37||c.keyCode===38){c.preventDefault();this.prev().find(".ex-toggle:first").focus()}}}}})(VF);
(function(){VF.skiplinks={init:function(){var e=navigator.userAgent.toLowerCase(),a=e.indexOf("webkit")>-1,c=e.indexOf("opera")>-1,d,b;if(a||c){d=document.location.hash.substr(1);this.focusElement(d);b=this;$(window).delegate(".jump-link","click",function(f){b.focusClick(b,f)},false)}},focusClick:function(d,g){var b=g.target,c,f;if(b.nodeName.toLowerCase()==="a"){c=b.getAttribute("href");if(c.indexOf("#")===0&&c.length>1){f=c.substr(1);d.focusElement(f,function(){g.preventDefault()})}}},focusElement:function(c,
a){var b=document.getElementById(c),d;if(b!==null){d=b.nodeName.toLowerCase();if(b.hasAttribute("tabindex")||(d==="input"||d==="a"||d==="button"||d==="textarea"||d==="area"))b.focus();else{b.setAttribute("tabindex","-1");b.focus();b.removeAttribute("tabindex")}if(typeof a==="function")a()}}};$(function(){VF.skiplinks.init()})})(VF);
(function(){VF.filter={init:function(){var a='<button type="button" class="reset link-button">';a+=VF.config.strings.clear;a+='<span class="access"></span>';a+="</button>";$(".filter").each(function(){$(this).find(".filters").each(function(){var b=$(this).find(".head").text().toLowerCase().replace(":"," "),c=$(a);c.css("visibility","hidden").attr("tabindex","-1").children().text(" "+b);c.bind("click",$.proxy(VF.filter.reset,$(this)));$(this).find(".body").append(c);$(this).find("input[type=checkbox]").bind("change",
$.proxy(VF.filter.toggleClear,$(this)));VF.filter.toggleClear.call($(this))})})},reset:function(a){a.preventDefault();this.find("input").removeAttr("checked").trigger("change")},toggleClear:function(){var b="hidden",a="-1";if(this.find("input").is(":checked")){b="visible";a="0;"}this.find(".reset").css("visibility",b).attr("tabindex",a)}}})(VF);
(function(){$.extend($.validator.defaults,{submitHandler:function(a){$(a).find("input[data-watermark], textarea[data-watermark], select[data-watermark]").each(function(){var b=$(this);if(b.val()===b.attr("data-watermark"))b.val("")});if($(a).attr("data-submit")==="false")return;a.submit()},errorPlacement:function(a,b){if($(b).is("input[type=radio],input[type=checkbox]"))$("input[name="+b.attr("name")+"]").next("label").prepend(a.addClass("access")," ");else $("label[for="+b.attr("id")+"]").prepend(a.addClass("access"),
" ")},invalidHandler:function(d,c){var e=$(c.currentForm),g="form-errors-"+c.numberOfInvalids(),a='<li><a class="link-text jump-link" href="#{id}"><span class="icon icon-arrow-r"></span>{error}</a></li>',f=VF.config.errors.title.replace(/\{number\}/,c.numberOfInvalids()),b='<div class="note" id="'+g+'">';b+='<div class="wrap failure">';b+='<h2><span class="access">'+VF.config.strings.error+"</span>"+f+"</h2>";b+="<p>"+VF.config.errors.summary+"</p>";b+='<ul class="list-plain">';b+="</ul>";b+="</div>";
b+="</div>";b=$(b);if(e.attr("data-summary")==="false")return;$.each(c.invalidElements(),function(){var i=a,j=$(this),k=j.attr("id"),h=j.attr("name");i=i.replace(/\{id\}/,k);i=i.replace(/\{error\}/,c.invalid[h]);i=$(i);i.children("a").bind("click",function(l){l.preventDefault();$($(this).attr("href")).focus()});b.find("ul").append(i)});e.prev(".note").remove();e.before(b);window.location.hash=g},success:function(a){var b=$("#"+a.parent().attr("for")),c=b.closest(".field");b.unbind("focusin focusout",
$.validator.defaults.toolTip);c.removeClass("error").siblings(".warning-med, .bubble").remove()},showErrors:function(a,b){this.defaultShowErrors();$.each(b,function(){var c=$(this.element),d=$('<span class="warning-med"></span>'),e=c.closest(".field");e.siblings(".warning-med").remove();e.addClass("error").after(d);c.unbind("focusin focusout",$.validator.defaults.toolTip);c.bind("focusin focusout",{error:this.message,element:c},$.validator.defaults.toolTip);d.bind("mouseenter mouseleave",{error:this.message,
element:c},$.validator.defaults.toolTip)})},toolTip:function(g){var a=g.data.element,f=a.closest(".field"),d,b=f.siblings(".warning-med"),c='<div class="bubble">';c+='<div class="wrap">{message}</div>';c+='<span class="left"></span>';c+="</div>";d=$(c.replace(/\{message\}/,g.data.error)).css("position","absolute");if(g.type==="focusout"||g.type==="mouseleave"){f.siblings(".bubble").remove();return}d.insertAfter(b).position({my:"left center",at:"right+12px top+13px",of:b,offset:"35px 33px 0 0"})},
errorElement:"span",errorClass:"error",focusInvalid:false,validClass:"valid"});$.validator.addMethod("postcode",function(c,a){var b=true;if($(a).is(".required",".group-required")&&c!==$(a).attr("data-watermark")||c!==$(a).attr("data-watermark"))b=VF.config.patterns.postcode.test(c);else if($(a).hasClass("required"))b=false;return b},VF.config.errors.postcode);$.validator.addMethod("email",function(c,a){var b=true;if($(a).hasClass("required")&&c!==$(a).attr("data-watermark")||c!==$(a).attr("data-watermark"))b=
VF.config.patterns.email.test(c);else if($(a).hasClass("required"))b=false;return b},VF.config.errors.email);$.validator.addMethod("landline",function(c,a){var b=true;if($(a).hasClass("required")&&c!==$(a).attr("data-watermark")||c!==$(a).attr("data-watermark"))b=VF.config.patterns.landline.test(c);else if($(a).hasClass("required"))b=false;return b},VF.config.errors.landline);$.validator.addMethod("mobile",function(c,a){var b=true;if($(a).hasClass("required")&&c!==$(a).attr("data-watermark")||c!==
$(a).attr("data-watermark"))b=VF.config.patterns.mobile.test(c);else if($(a).hasClass("required"))b=false;return b},VF.config.errors.mobile);$.validator.addMethod("match",function(c,a){var b=true,d=$(a);if($(a).hasClass("required")&&c!==$(a).attr("data-watermark")||c!==$(a).attr("data-watermark"))b=c===$("#"+d.attr("data-match")).val()?true:false;else if($(a).hasClass("required"))b=false;return b},VF.config.errors.match);$.validator.addMethod("numbers",function(c,a){var b=true;if(c!==""&&c!==$(a).attr("data-watermark")||
$(a).is("required","group-required")&&c!==$(a).attr("data-watermark"))b=VF.config.patterns.numbers.test(c);else if($(a).is("required","group-required"))b=false;console.log(c);return b},VF.config.errors.numbers);$.validator.addMethod("grouprequired",function(d,b){var e=$(b),f=parseFloat(e.attr("data-required")),a=$("."+e.attr("data-required-class")),c;c=a.filter(function(){var g=$(this).hasClass("watermark")&&$(this).val()===$(this).attr("data-watermark")?"":$(this).val();return g}).length>=f;if(!$(e).data("validating"))a.each(function(){$(this).data("validating",
true);$(this).trigger("focusout");$(this).data("validating",false)});return c},VF.config.errors.requiredGroup);$.validator.addMethod("watermark",function(c,a){var b=true;if(c===$(a).attr("data-watermark")&&$(a).hasClass("required"))b=false;return b},VF.config.errors.required);$.extend($.validator.messages,{required:VF.config.errors.required});$.validator.addClassRules({"postcode-rule":{postcode:true},"email-rule":{email:true},"landline-rule":{landline:true},"mobile-rule":{mobile:true},numbers:{numbers:true},
match:{match:true},"group-required":{grouprequired:true},watermark:{watermark:true}})})($);
(function(){VF.validate={init:function(b){var a=b&&b instanceof jQuery?b.find(".validate"):$(".validate");a.validate()}};VF.focusable={init:function(){$("#content").delegate("input[type=text], textarea, select","focusin focusout",VF.focusable.highlight);$("#content").find("input, textarea, select").each(function(){if($(this).attr("data-watermark"))$(this).val($(this).attr("data-watermark"))})},highlight:function(b){var a=$(this).parent(".field");if(b.type==="focusin"){if($(this).hasClass("watermark")&&
$(this).val()===$(this).attr("data-watermark"))$(this).val("").removeClass("watermark");$(this).addClass("focus");a.addClass("focus")}else{if($(this).attr("data-watermark")&&$(this).val()==="")$(this).val($(this).attr("data-watermark")).addClass("watermark");else if($(this).attr("data-watermark"))$(this).removeClass("watermark");$(this).removeClass("focus");a.removeClass("focus");$(this).valid()}}};VF["char-count"]={init:function(){var c,b,a='<div class="counter">';a+=VF.config.strings.charcount;
a+="</div>";$(".char-count").each(function(){b=$(this).attr("maxlength")||500;$(this).bind("keyup",VF["char-count"].update);c=$(a.replace(/\{int\}/,"<span>"+b+"</span>"));c.insertAfter($(this).parent())})},update:function(f){var c=$(this),d,b=c.attr("maxlength")||500,a=c.parent(".field").siblings(".counter");d=b-c.val().length;if(d<0){c.val(c.val().substr(0,b));d=0}a.find("span").text(d)}};$(function(){VF.focusable.init();VF["char-count"].init()});VF["submit-auto"]={init:function(b){var a=b&&b instanceof
jQuery?b.find(".submit-auto"):$(".submit-auto");a.each(function(){var c=$(this);$(this).find(".submit-control").each(function(){var d=$(this).is("select, input[type=radio], input[type=checkbox]")?"change":"click";$(this).bind(d,$.proxy(VF["submit-auto"].submit,c))})})},submit:function(c){var b=this.attr("data-submit"),a=this.attr("action"),d=this.attr("method")==="post"?"post":"get";if(b==="refresh")this.submit();if(b==="ajax")$.ajax({type:d,url:a,data:this.serialize()})}}})(VF);
(function(){VF["link-zone"]={init:function(){var a=$(".link-zone");a.each(function(){$(this).click(function(b){window.location=$(this).find("a").attr("href");b.preventDefault()})})}}})(VF);
(function(){VF.moreLess={init:function(){$(".more-less").each(function(c){var b=parseInt($(this).attr("data-toggle"),10),f=$(this).attr("id")||"more-less-"+c,a=$(this).find(".body"),d,e='<span class="access">{hide-text}</span>';e+='<span class="access"> '+(a.children().length-b)+" </span>";e+="<span>{less-text}</span>";e+='<span class="access"> '+$(this).find(".head").text().replace(":","")+"</span>";if(!$(this).hasClass("mo-open"))$(this).addClass("mo-close");if($(this).hasClass("mo-open")){e=e.replace(/\{hide-text\}/g,
VF.config.strings.hide);e=e.replace(/\{less-text\}/g,VF.config.strings.less)}else{e=e.replace(/\{hide-text\}/g,VF.config.strings.show);e=e.replace(/\{less-text\}/g,VF.config.strings.more);a.children(":gt("+(b-1)+")").not(".mo-toggle, .reset").hide()}d=$(this).find("input").length>0?'<button type="button" class="mo-toggle link-button">'+e+"</button>":'<a href="'+f+'" class="mo-toggle">'+e+"</a>";a.append(d);$(this).find(".body .mo-toggle").bind("click",$.proxy(VF.moreLess.click,$(this)))})},click:function(e){e.preventDefault();
var b=parseInt(this.attr("data-toggle"),10),a=this.find(".body"),d,c;this.toggleClass("mo-open").toggleClass("mo-close");if(this.hasClass("mo-open")){d=VF.config.strings.hide;c=VF.config.strings.less;a.children().not(".mo-toggle, .reset").show("fast")}else{d=VF.config.strings.show;c=VF.config.strings.more;a.children(":gt("+(b-1)+")").not(".mo-toggle, .reset").hide("fast")}this.find(".mo-toggle span:eq(0)").text(d);this.find(".mo-toggle span:eq(2)").text(c)}}})(VF);
(function(){VF["multi-select"]={init:function(u){var p=u&&u instanceof jQuery?u.find(".multi-select"):$(".multi-select");var o='<option value="{value}">{name}</option>',h=o.replace(/\{value\}|\{name\}/g,""),y=[],f=[],e=0,x,b,k,l,v,a,d,C,c,m,r;r='<div class="form-row">';r+='<label for="{id}">{label}</label>';r+='<div class="field">';r+='<select id="{id}" name="{select-name}"></select>';r+="</div>";r+="</div>";p.each(function(G){var E=$(this).find("select"),H=E.attr("class"),I=$(this).find("label"),
F=E.attr("data-master"),D=E.attr("data-puppet"),j=$(this).find("optgroup"),J=E.attr("data-group");if(typeof J!=="undefined"){var K=J.toLowerCase();identifier=I.text();$(this).attr("data-select-id",identifier);$(this).closest(".multi-select-group").attr("data-select-group",J);if(typeof y[J]=="undefined")y[J]=[];y[J].push([I.text(),identifier])}$(this).removeClass("form-row").children().addClass("delete").hide();l=r.replace(/\{id\}/g,"master-"+G);l=l.replace(/\{select-name\}/g,"master-"+G);l=l.replace(/\{label\}/g,
F);l=$(l);j.each(function(L){I=$(this).attr("label");d=o.replace(/\{value\}/g,I);d=d.replace(/\{name\}/g,I);d=$(d);d.data({html:$(this).children()});l.find("select").addClass(H).append(d);if(L===j.length-1)l.find("select").prepend($(h).attr("selected",true).text(VF.config.strings.select+" "+F)).val("")});l.find("select").bind("change",$.proxy(VF["multi-select"].manipulate,$(this)));$(this).prepend(l);m=r.replace(/\{id\}/g,"puppet-"+G);m=m.replace(/\{label\}/g,D);m=$(m);m.find("select").addClass(H).attr({disabled:true,
name:E.attr("name")}).prepend($(h).attr("selected",true).text(VF.config.strings.select+" "+D));l.after(m);$(this).find(".delete").remove()});for(key in y){f.push(key);e++}for(var w=0;w<e;w+=1){var g=$("[data-select-group="+f[w]+"]"),A=g.find("[data-select-id]"),n=f[w],z=y[n],a="";A.not(":first").hide();x=r.replace(/\{id\}/g,"group-switch-"+n);x=x.replace(/\{select-name\}/g,"group-switch-"+n);x=x.replace(/\{label\}/g,n);x=$('<div class="multi-select" data-select-switch="'+n+'">'+x+"</div>");var q=
x.find("select");q.prepend($(h).attr("selected",true).text(VF.config.strings.select+" "+n)).val("");for(var t=0;t<z.length;t++){var B=z[t][0],s=z[t][1];d=o.replace(/\{value\}/g,s);d=d.replace(/\{name\}/g,B);d=$(d);q.append(d)}q.bind("change",$.proxy(VF["multi-select"].manipulate,$(this)));A.closest(".multi-select-group").prepend(x);g.find("select[id|=master]").attr("disabled",true)}},manipulate:function(g){var c=$(g.currentTarget),j=$(g.currentTarget).closest(".multi-select-group");if(j.length>0){var d=
j.find("[data-select-switch] select"),a=j.find("select[id|=master]"),b=j.find("select[id|=puppet]"),h=j.find("[data-select-id]");if(c.is(d)){a.val("");b.attr("disabled",true).val("")}if(d.val()==="")a.attr("disabled",true);else{a.attr("disabled",false);h.hide();h.filter("[data-select-id="+d.val()+"]").show();a=j.find("[data-select-id="+d.val()+"]").find("select[id|=master]");b=j.find("[data-select-id="+d.val()+"]").find("select[id|=puppet]");if(c.is(d))a.focus();b.children().not(":first-child").remove();
if(a.val()==="")b.attr("disabled",true);else if(c.is(a)){var f=a.find("option:selected").data().html;b.attr("disabled",false).append(f).focus()}}}else{var i=c,f=i.find("option:selected").data().html,b=this.find("select[id|=puppet]");b.children().not(":first-child").remove();if(i.val()!=="")b.attr("disabled",false).append(f).focus().val("");else b.attr("disabled",true)}}}})(VF);
(function(){VF["no-focus"]={init:function(){var a=$("body");a.delegate("a:not(.button), label","click",VF["no-focus"].inputs);a.delegate("a:not(.button), input","focusout",VF["no-focus"].focusout)},inputs:function(){$(this).addClass("click")},focusout:function(){if($(this).context.nodeName.toLowerCase()=="input")$(this).siblings("label").removeClass("click");else $(this).removeClass("click")}};$(function(){VF["no-focus"].init()})})(VF);
(function(){VF["page-controls"]={init:function(){var a=$("#page-controls");a.find(".radio-box input").bind("change",VF["page-controls"].layout);a.find(".radio-box label").bind("click",function(){$(this).prev("input").trigger("change")});a.find(".radio-box input:checked").trigger("change")},layout:function(){var a=$("#page-results");if($(this).hasClass("sort-list")){a.addClass("list-view").children("li").removeClass(function(c,b){var d=b.match(/grid-\d+/g)||[];$(this).data("grid",d[0]);return d.join(" ")});
a.find(".rating a").show();a.find(".details").removeClass("access");a.find(".pad > .list-plain").addClass("list-inline").removeClass("list-plain")}else{a.removeClass("list-view").children("li").addClass(function(){return $(this).data("grid")});a.find(".rating a").hide();a.find(".details").addClass("access");a.find(".pad > .list-inline").addClass("list-plain").removeClass("list-inline")}}}})(VF);
(function(){VF["rate-article"]={init:function(){$(".rate-article").each(function(){var a=$(this).find("input"),b=$(this).find(".tool-tip");a.bind("change",$.proxy(VF["rate-article"].closeTip,b))})},closeTip:function(){var a=$(this);a.removeAttr("style")}}})(VF);
(function(){VF.reveal={init:function(b){var a=b&&b instanceof jQuery?b.find(".reveal"):$(".reveal");a.each(function(e){var k="reveal-"+e,c=$(this).children(".body"),d=$(this).children(".head").text(),g=c.text(),f,j,h;f=g.substring(0,VF.config.integers.reveal);j=g.substring(VF.config.integers.reveal+1,g.length);c.empty();c.prepend(f);c.append('<span class="hide">'+j+"</span>");$(this).attr("id",k);h=VF.reveal.view(k,d);h.find("a").bind("click",$.proxy(VF.reveal.toggle,$(this)));$(this).append(h)})},
toggle:function(b){b.preventDefault();var c=this.find(".hide"),a;if(this.hasClass("active")){this.removeClass("active");c.hide();a=VF.config.strings.more}else{this.addClass("active");c.fadeIn("slow");a=VF.config.strings.less}this.find(".footer a span:eq(1)").text(a)},view:function(c,b){var a='<div class="footer">';a+='<a href="#{id}" class="link-text"><span class="icon icon-arrow-r"></span><span>'+VF.config.strings.more+'</span><span class="access"> {content}</span></a>';a+="</div>";a=a.replace(/\{id\}/,
c);a=a.replace(/\{content\}/,b);a=$(a);return a}}})(VF);(function(){VF.share={init:function(b){var a=b&&b instanceof jQuery?b.find(".share"):$(".share")},popout:function(a){},filter:function(a){}}})(VF);
(function(){VF.slider={init:function(b){var a=b&&b instanceof jQuery?b.find(".slides"):$(".slides");var c='<div class="controls">';c+='<a href="#slider-{id}" class="prev prev-disabled" tabindex="-1"><span class="access status"></span></a>';c+='<ul class="shortcuts list-plain"></ul>';c+='<a href="#slider-{id}" class="next"><span class="access status"></span></a>';c+="</div>";a.each(function(j){var h,l,m,f=$(this).closest(".slider"),d=$(this).children(),n=0,k=0,e=$(this).width(),g=e*d.length;d.each(function(){var i=
$(this).height();if(i>n)n=i});k=n;if(f.hasClass("slider-vertical")){g=e;k=n*d.length}$(this).attr({id:"slider-"+j}).css({width:g,height:k/13+"em"}).parent(".slider").css({width:e,height:n/13+"em",position:"relative"}).attr("data-index","0");d.css({width:e,height:n/13+"em"});if(d.length===1)return;h=$(c.replace(/\{id\}/g,j));l=VF.config.strings.slide.replace(/\{int\}/g,1);l=l.replace(/\{total\}/g,d.length);l=l+d.eq(0).find(".item").text();m=VF.config.strings.slide.replace(/\{int\}/g,2);m=m.replace(/\{total\}/g,
d.length);m=m+d.eq(1).find(".item").text();h.find(".prev .status").text(l);h.find(".next .status").text(m);d.each(function(q){var p=$(this).find(".item").text(),r="slider-"+j+"-pic-"+q,o,i;$(this).find(".slider-body").attr({id:r});i='<li><a aria-describedby="'+r+'" href="#'+r+'" title="'+p+'" data-index="'+q+'" class="shortcut';if(q===0){i+=' active" tabindex="-1">';o=VF.config.strings.selected+" - "}else{i+='">';o=VF.config.strings.slide.replace(/\{int\}/g,q+1);o=o.replace(/\{total\}/g,d.length)}i+=
'<span class="access"><span class="status">'+o+"</span>"+p+"</span></a></li>";h.find(".shortcuts").append(i);if(q>0)$(this).children(".slider-body").css({display:"none"})});h.find("a").bind("click",$.proxy(VF.slider.nudge,f));f.bind("keypress",$.proxy(VF.slider.keyboard,f));$(this).before(h)})},keyboard:function(b){if(b.keyCode===39||b.keyCode===40||b.keyCode===37||b.keyCode===38){var a;b.preventDefault();if(b.keyCode===39||b.keyCode===40)a=".next";if(b.keyCode===37||b.keyCode===38)a=".prev";this.find(a).focus().trigger("click")}},
nudge:function(m){m.preventDefault();var p=$(m.currentTarget),b=$(this),i=b.find(".slides"),a=i.children(),k=parseFloat(b.attr("data-index")),c=b.find(".prev"),h=b.find(".next"),f=a.width(),g=-(k*f),j=b.find(".shortcuts a"),o=VF.config.strings.slide,q=VF.config.strings.slide,d,l;if(b.hasClass("slider-vertical")){f=a.height();g=-(k*f)}if(p.hasClass("next-disabled")||p.hasClass("prev-disabled")||p.hasClass("active"))return;h.addClass("next-disabled").attr("tabindex","-1");c.addClass("prev-disabled").attr("tabindex",
"-1");if(p.hasClass("shortcut")){l=parseFloat(p.attr("data-index"));g=-(l*f);k=l}if(p.hasClass("next")){g-=f;k+=1}if(p.hasClass("prev")){g+=f;k-=1}a.eq(k).children(".slider-body").css({display:"block"});if(b.hasClass("slider-vertical"))i.animate({top:g},300,n);else i.animate({left:g},300,n);function n(){if(p.hasClass("next"))c.removeClass("prev-disabled").removeAttr("tabindex");if(p.hasClass("prev"))h.removeClass("next-disabled").removeAttr("tabindex");a.not(":eq("+k+")").children(".slider-body").css("display",
"none");j.removeClass("active").removeAttr("tabindex").eq(k).addClass("active").attr("tabindex","-1");j.each(function(u){if($(this).hasClass("active"))d=VF.config.strings.selected+" - ";else{d=q.replace(/\{int\}/g,u+1);d=d.replace(/\{total\}/g,j.length)}$(this).find(".status").text(d)});var r,t,s,e;if(k!==a.length-1){h.removeClass("next-disabled").removeAttr("tabindex");t=k+2;r=a.eq(k+1).find(".item").text()}else{t=a.length;r=a.eq(k).find(".item").text()}if(k!==0){c.removeClass("prev-disabled").removeAttr("tabindex");
e=k;s=a.eq(k-1).find(".item").text()}else{e=1;s=a.eq(0).find(".item").text()}q=q.replace(/\{int\}/g,t);q=q.replace(/\{total\}/g,a.length);q=q+r;o=o.replace(/\{int\}/g,e);o=o.replace(/\{total\}/g,a.length);o=o+s;h.find(".status").text(q);c.find(".status").text(o)}b.attr("data-index",k)}}})(VF);
(function(){VF.tabs={init:function(a){var b,c,d;if(a&&a instanceof jQuery){b=a.find(".tabs .head");c=a.find(".tabs");d=a.find(".tabs-big")}else{b=$(".tabs .head");c=$(".tabs");d=$(".tabs-big")}b.each(function(e){$(this).find("a").attr("tabindex","-1");$(this).find("li.selected a").attr("tabindex","0").append('<span class="access selected"> - '+VF.config.strings.selected+"</span>");VF.tabs.addTooltip.call($(this))});d.each(function(){var g=$(this).find("li"),f=Math.round(100/g.length),e=Math.round(100-
f*g.length);if(f*g.length===100)g.css("width",f+"%");else{g.not(":last").css("width",f+"%");g.last().css("width",f+e+"%")}});c.delegate("div.tabs-top a","click",VF.tabs.backToTop);c.find(".head:first").delegate("a","click",VF.tabs.load);b.delegate("a","keydown",VF.tabs.arrowKeys)},addTooltip:function(){var a=$(this).find("li.selected");$(this).find("a").removeClass("tipper tipper-b").removeAttr("data-tip").unbind("focusin focusout",VF["tool-tip"].tip);a.find("a").addClass("tipper tipper-b").attr("data-tip",
VF.config.strings.tabTip);VF["tool-tip"].init(a)},load:function(d){d.preventDefault();var b=$(this).attr("href").split("#")[0],g=$(this).attr("href").split("#")[1],f=$(d.liveFired),a=$(d.liveFired).parents(".tabs"),c=$(this);if(c.closest("li").hasClass("selected"))return;a.prepend(VF.config.html["loader-lrg"]);a.find(".body").addClass("loading");f.find("a .selected").remove();c.append('<span class="access selected"> - '+VF.config.strings.selected+"</span>");$.get(b,function(h){var e=$(h).find("#"+
g);f.find("li.selected").removeClass("selected");c.closest("li").addClass("selected");a.find(".body").append(e).children().not("#"+g).remove();a.find(".body").animate({opacity:1},100,function(){a.find(".loader-lrg").remove();$(this).removeClass("loading").removeAttr("style")});a.find(".loader-lrg").remove();VF.util.initModules(h,g);VF.tabs.addTooltip.call(f)});f.find("a").attr("tabindex","-1");c.attr("tabindex","0")},backToTop:function(a){a.preventDefault();a.stopPropagation();$(a.liveFired).find(".head li.selected a").focus()},
arrowKeys:function(b){var a=$(this).closest("li");if(b.keyCode===39)a.next().find("a").focus();if(b.keyCode===37)a.prev().find("a").focus()}}})(VF);
(function(){VF["tool-tip"]={init:function(b){var c='<a href="#{id}" aria-describedby="{id}" class="tipper-generated" />',a=b&&b instanceof jQuery?b.find(".tipper"):$(".tipper");a.each(function(){var g,e;if(!$(this).is(":focusable")){$(this).wrap(c.replace(/\{id\}/g,$(this).attr("aria-describedby")));$(this).removeAttr("aria-describedby");g=$(this).parent("a");g.addClass($(this).attr("class"));$(this).removeAttr("class");if($(this).attr("data-tip")!==undefined){g.attr("data-tip",$(this).attr("data-tip"));
$(this).removeAttr("data-tip")}}else g=$(this);var d=$("#"+g.attr("aria-describedby")),h=d.find(":focusable").length>0;if(h){e="click change";var i=d.find(".head"),f='<a href="#" class="tipper-close">';f+=VF.config.strings.hide;f+='<span class="access"> '+i.text();f+=" "+VF.config.strings.content+"</span>";f+='<span class="close"></span></a>';d.find(".body").after(f);i.css("margin-right",d.find(".tipper-close").width()+10+"px");d.find(".tipper-close").click($.proxy(VF["tool-tip"].closeFlyout,d));
d.bind("focusout",$.proxy(VF["tool-tip"].focusable,d));g.addClass("tipper-flyout");d.hide()}else if(g.attr("data-tip")===undefined)e="click mouseenter mouseleave focusin focusout";else e="focusin focusout";g.bind(e,VF["tool-tip"].tip);g.hover($.proxy(VF["tool-tip"].detectMouse,$(this)))})},focusable:function(b){var a=$(b.currentTarget),c=a.find(":focusable");window.setTimeout(function(){if(!c.is(":focus")){a.find(".tipper-close").trigger("click");c.unbind("focusout")}},15)},closeFlyout:function(c){var a=
this,b=$('a[aria-describedby="'+a.attr("id")+'"] span:first');a.hide();b.text(VF.config.strings.show+" ");c.preventDefault()},detectMouse:function(a){this.toggleClass("mouse-alive")},view:function(b){var a='<div id="tip-{id}" class="tool-tip">';a+='<div class="wrap">';a+='<div class="body">';a+="<p>{content}</p>";a+="</div>";a+="</div>";a+='<div class="origin"></div>';a+="</div>";a=a.replace(/\{id\}/g,(new Date).getTime());a=a.replace(/\{content\}/g,b);return $(a)},tip:function(f){var c=$(f.currentTarget),
d,b=true,a={at:"right center",my:"left center",offset:"22 0",of:c},g=c.hasClass("tipper-flyout");if(f.type==="click"&&c.hasClass("tipper-generated")||f.type==="click"&&c.is("a")&&g)f.preventDefault();if(f.type==="focusin"||f.type==="mouseenter"||f.type==="click"||f.type==="change"){if(c.attr("data-tip")!==undefined){d=VF["tool-tip"].view(c.attr("data-tip"));if(!c.hasClass("mouse-alive")){c.data({id:d.attr("id")});$("body").append(d)}c.attr("aria-describedby",d.attr("id"))}else d=$("#"+c.attr("aria-describedby"));
switch(b){case c.hasClass("tipper-t"):a.my="top";a.at="bottom";a.offset="0 22px";d.addClass("tool-tip-t");break;case c.hasClass("tipper-tr"):a.my="right top";a.at="left bottom";a.offset="55px 20px";d.addClass("tool-tip-tr");break;case c.hasClass("tipper-b"):a.my="bottom";a.at="top";a.offset="0 -22";d.addClass("tool-tip-b");break;default:d.addClass("tool-tip-l")}if(g){d.show();c.find("span:first").text(VF.config.strings.hide+" ")}if(c.is("input"))a.of=c.next();window.setTimeout(function(){d.position({my:a.my,
at:a.at,of:a.of,offset:a.offset,collision:"flip"})},15)}else if(f.type==="focusout"||f.type==="mouseleave"){$("#"+c.attr("aria-describedby")).removeAttr("style");if(c.attr("data-tip")!==undefined){c.removeAttr("aria-describedby");$("#"+c.data().id).remove()}}}}})(VF);